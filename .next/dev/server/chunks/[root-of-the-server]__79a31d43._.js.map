{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/laksh/Downloads/cafe-landing-page-template01-main/cafe-landing-page-template01-main/app/api/reservation/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport Twilio from \"twilio\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const {\r\n      name = \"N/A\",\r\n      email = \"N/A\",\r\n      phone = \"N/A\",\r\n      date = \"N/A\",\r\n      guests = \"N/A\",\r\n      message = \"N/A\",\r\n    } = body;\r\n\r\n    const accountSid = process.env.TWILIO_ACCOUNT_SID!;\r\n    const authToken = process.env.TWILIO_AUTH_TOKEN!;\r\n    const twilioWhatsappNumber = process.env.TWILIO_WHATSAPP_NUMBER!; \r\n    const ownerNumber = process.env.WHATSAPP_OWNER_NUMBER!; \r\n\r\n    if (!accountSid || !authToken || !twilioWhatsappNumber || !ownerNumber) {\r\n      return NextResponse.json(\r\n        { error: \"Missing Twilio environment variables\" },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    const client = Twilio(accountSid, authToken);\r\n\r\n    const waMessage = `ðŸ“© New Reservation Request\r\n\r\nName: ${name}\r\nEmail: ${email}\r\nPhone: ${phone}\r\nDate: ${date}\r\nGuests: ${guests}\r\nNotes: ${message}`;\r\n\r\n    // Send WhatsApp via Twilio\r\n    await client.messages.create({\r\n      from: twilioWhatsappNumber,\r\n      to: ownerNumber,\r\n      body: waMessage,\r\n    });\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: \"Reservation sent to owner's WhatsApp via Twilio\",\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Twilio Server Error:\", error);\r\n    return NextResponse.json({ error: \"Internal Server Error (Twilio)\" }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EACJ,OAAO,KAAK,EACZ,QAAQ,KAAK,EACb,QAAQ,KAAK,EACb,OAAO,KAAK,EACZ,SAAS,KAAK,EACd,UAAU,KAAK,EAChB,GAAG;QAEJ,MAAM,aAAa,QAAQ,GAAG,CAAC,kBAAkB;QACjD,MAAM,YAAY,QAAQ,GAAG,CAAC,iBAAiB;QAC/C,MAAM,uBAAuB,QAAQ,GAAG,CAAC,sBAAsB;QAC/D,MAAM,cAAc,QAAQ,GAAG,CAAC,qBAAqB;QAErD,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,wBAAwB,CAAC,aAAa;YACtE,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuC,GAChD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,IAAA,mJAAM,EAAC,YAAY;QAElC,MAAM,YAAY,CAAC;;MAEjB,EAAE,KAAK;OACN,EAAE,MAAM;OACR,EAAE,MAAM;MACT,EAAE,KAAK;QACL,EAAE,OAAO;OACV,EAAE,SAAS;QAEd,2BAA2B;QAC3B,MAAM,OAAO,QAAQ,CAAC,MAAM,CAAC;YAC3B,MAAM;YACN,IAAI;YACJ,MAAM;QACR;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAiC,GAAG;YAAE,QAAQ;QAAI;IACtF;AACF"}}]
}